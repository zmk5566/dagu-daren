<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SVG 测试页面</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 40px;
            background: #f0f0f0;
        }
        .test-section {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .test-item {
            text-align: center;
            padding: 15px;
            border: 2px dashed #ccc;
            border-radius: 8px;
        }
        .test-item h4 {
            margin: 0 0 10px 0;
            color: #333;
        }
        .status {
            margin: 10px 0;
            padding: 5px;
            border-radius: 4px;
        }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
        .info { background: #d1ecf1; color: #0c5460; }
        
        /* 不同背景测试 */
        .bg-red { background: #ff4444; }
        .bg-blue { background: #4444ff; }
        .bg-green { background: #44ff44; }
        .bg-black { background: #000000; }
        .bg-white { background: #ffffff; }
        .bg-gradient { background: linear-gradient(45deg, #ff006e, #8338ec); }
        
        /* SVG 容器样式 */
        .svg-container {
            display: inline-block;
            margin: 10px;
            padding: 10px;
            border: 1px solid #ddd;
        }
    </style>
</head>
<body>
    <h1>SVG 加载测试页面</h1>
    
    <div class="test-section">
        <h2>1. 基本路径测试</h2>
        <div class="test-grid">
            <div class="test-item">
                <h4>相对路径</h4>
                <img src="static/crocodile-don.svg" alt="Crocodile (relative)" width="60" height="60" onerror="this.nextElementSibling.textContent='❌ 加载失败'; this.nextElementSibling.className='status error';" onload="this.nextElementSibling.textContent='✅ 加载成功'; this.nextElementSibling.className='status success';">
                <div class="status info">加载中...</div>
            </div>
            
            <div class="test-item">
                <h4>绝对路径</h4>
                <img src="/static/crocodile-don.svg" alt="Crocodile (absolute)" width="60" height="60" onerror="this.nextElementSibling.textContent='❌ 加载失败'; this.nextElementSibling.className='status error';" onload="this.nextElementSibling.textContent='✅ 加载成功'; this.nextElementSibling.className='status success';">
                <div class="status info">加载中...</div>
            </div>
            
            <div class="test-item">
                <h4>完整URL</h4>
                <img src="http://127.0.0.1:5001/static/crocodile-don.svg" alt="Crocodile (full URL)" width="60" height="60" onerror="this.nextElementSibling.textContent='❌ 加载失败'; this.nextElementSibling.className='status error';" onload="this.nextElementSibling.textContent='✅ 加载成功'; this.nextElementSibling.className='status success';">
                <div class="status info">加载中...</div>
            </div>
            
            <div class="test-item">
                <h4>Bird Ka SVG</h4>
                <img src="/static/bird-ka.svg" alt="Bird Ka" width="60" height="60" onerror="this.nextElementSibling.textContent='❌ 加载失败'; this.nextElementSibling.className='status error';" onload="this.nextElementSibling.textContent='✅ 加载成功'; this.nextElementSibling.className='status success';">
                <div class="status info">加载中...</div>
            </div>
            
            <div class="test-item">
                <h4>Crocodile Clean</h4>
                <img src="/static/crocodile-don-clean.svg" alt="Crocodile Clean" width="60" height="60" onerror="this.nextElementSibling.textContent='❌ 加载失败'; this.nextElementSibling.className='status error';" onload="this.nextElementSibling.textContent='✅ 加载成功'; this.nextElementSibling.className='status success';">
                <div class="status info">加载中...</div>
            </div>
            
            <div class="test-item">
                <h4>Bird Clean</h4>
                <img src="/static/bird-ka-clean.svg" alt="Bird Clean" width="60" height="60" onerror="this.nextElementSibling.textContent='❌ 加载失败'; this.nextElementSibling.className='status error';" onload="this.nextElementSibling.textContent='✅ 加载成功'; this.nextElementSibling.className='status success';">
                <div class="status info">加载中...</div>
            </div>
            
            <div class="test-item">
                <h4>Bird Minimal (水墨)</h4>
                <img src="/static/bird-ka-minimal.svg" alt="Bird Minimal" width="60" height="60" onerror="this.nextElementSibling.textContent='❌ 加载失败'; this.nextElementSibling.className='status error';" onload="this.nextElementSibling.textContent='✅ 加载成功'; this.nextElementSibling.className='status success';">
                <div class="status info">加载中...</div>
            </div>
            
            <div class="test-item">
                <h4>Bird Zen (禅意)</h4>
                <img src="/static/bird-ka-zen.svg" alt="Bird Zen" width="60" height="60" onerror="this.nextElementSibling.textContent='❌ 加载失败'; this.nextElementSibling.className='status error';" onload="this.nextElementSibling.textContent='✅ 加载成功'; this.nextElementSibling.className='status success';">
                <div class="status info">加载中...</div>
            </div>
            
            <div class="test-item">
                <h4>Bird Line (白描)</h4>
                <img src="/static/bird-ka-line.svg" alt="Bird Line" width="60" height="60" onerror="this.nextElementSibling.textContent='❌ 加载失败'; this.nextElementSibling.className='status error';" onload="this.nextElementSibling.textContent='✅ 加载成功'; this.nextElementSibling.className='status success';">
                <div class="status info">加载中...</div>
            </div>
            
            <div class="test-item">
                <h4>Bird Ultra (极简)</h4>
                <img src="/static/bird-ka-ultra.svg" alt="Bird Ultra" width="60" height="60" onerror="this.nextElementSibling.textContent='❌ 加载失败'; this.nextElementSibling.className='status error';" onload="this.nextElementSibling.textContent='✅ 加载成功'; this.nextElementSibling.className='status success';">
                <div class="status info">加载中...</div>
            </div>
            
            <div class="test-item">
                <h4>Crocodile Line (白描)</h4>
                <img src="/static/crocodile-don-line.svg" alt="Crocodile Line" width="60" height="60" onerror="this.nextElementSibling.textContent='❌ 加载失败'; this.nextElementSibling.className='status error';" onload="this.nextElementSibling.textContent='✅ 加载成功'; this.nextElementSibling.className='status success';">
                <div class="status info">加载中...</div>
            </div>
            
            <div class="test-item">
                <h4>用户鸟 (你画的)</h4>
                <img src="/static/user-bird.svg" alt="User Bird" width="60" height="60" onerror="this.nextElementSibling.textContent='❌ 加载失败'; this.nextElementSibling.className='status error';" onload="this.nextElementSibling.textContent='✅ 加载成功'; this.nextElementSibling.className='status success';">
                <div class="status info">加载中...</div>
            </div>
            
            <div class="test-item">
                <h4>用户鳄鱼 (你画的)</h4>
                <img src="/static/user-crocodile.svg" alt="User Crocodile" width="60" height="60" onerror="this.nextElementSibling.textContent='❌ 加载失败'; this.nextElementSibling.className='status error';" onload="this.nextElementSibling.textContent='✅ 加载成功'; this.nextElementSibling.className='status success';">
                <div class="status info">加载中...</div>
            </div>
            
            <div class="test-item">
                <h4>用户鸟 简化版</h4>
                <img src="/static/user-bird-simplified.svg" alt="User Bird Simplified" width="60" height="60" onerror="this.nextElementSibling.textContent='❌ 加载失败'; this.nextElementSibling.className='status error';" onload="this.nextElementSibling.textContent='✅ 加载成功'; this.nextElementSibling.className='status success';">
                <div class="status info">加载中...</div>
            </div>
            
            <div class="test-item">
                <h4>用户鳄鱼 简化版</h4>
                <img src="/static/user-crocodile-simplified.svg" alt="User Crocodile Simplified" width="60" height="60" onerror="this.nextElementSibling.textContent='❌ 加载失败'; this.nextElementSibling.className='status error';" onload="this.nextElementSibling.textContent='✅ 加载成功'; this.nextElementSibling.className='status success';">
                <div class="status info">加载中...</div>
            </div>
            
            <div class="test-item">
                <h4>用户鸟 适度简化</h4>
                <img src="/static/user-bird-moderate.svg" alt="User Bird Moderate" width="60" height="60" onerror="this.nextElementSibling.textContent='❌ 加载失败'; this.nextElementSibling.className='status error';" onload="this.nextElementSibling.textContent='✅ 加载成功'; this.nextElementSibling.className='status success';">
                <div class="status info">加载中...</div>
            </div>
            
            <div class="test-item">
                <h4>用户鳄鱼 适度简化</h4>
                <img src="/static/user-crocodile-moderate.svg" alt="User Crocodile Moderate" width="60" height="60" onerror="this.nextElementSibling.textContent='❌ 加载失败'; this.nextElementSibling.className='status error';" onload="this.nextElementSibling.textContent='✅ 加载成功'; this.nextElementSibling.className='status success';">
                <div class="status info">加载中...</div>
            </div>
        </div>
    </div>
    
    <div class="test-section">
        <h2>2. 不同背景颜色下的可见性测试</h2>
        <div class="test-grid">
            <div class="test-item bg-white">
                <h4 style="color: black;">白色背景</h4>
                <img src="/static/crocodile-don.svg" alt="Don on white" width="60" height="60">
                <img src="/static/bird-ka.svg" alt="Ka on white" width="60" height="60">
            </div>
            
            <div class="test-item bg-red">
                <h4 style="color: white;">红色背景</h4>
                <img src="/static/crocodile-don.svg" alt="Don on red" width="60" height="60">
                <img src="/static/bird-ka.svg" alt="Ka on red" width="60" height="60">
            </div>
            
            <div class="test-item bg-blue">
                <h4 style="color: white;">蓝色背景</h4>
                <img src="/static/crocodile-don.svg" alt="Don on blue" width="60" height="60">
                <img src="/static/bird-ka.svg" alt="Ka on blue" width="60" height="60">
            </div>
            
            <div class="test-item bg-black">
                <h4 style="color: white;">黑色背景</h4>
                <img src="/static/crocodile-don.svg" alt="Don on black" width="60" height="60">
                <img src="/static/bird-ka.svg" alt="Ka on black" width="60" height="60">
            </div>
            
            <div class="test-item bg-gradient">
                <h4 style="color: white;">渐变背景</h4>
                <img src="/static/crocodile-don.svg" alt="Don on gradient" width="60" height="60">
                <img src="/static/bird-ka.svg" alt="Ka on gradient" width="60" height="60">
            </div>
            
            <div class="test-item bg-gradient">
                <h4 style="color: white;">清理版本测试</h4>
                <img src="/static/crocodile-don-clean.svg" alt="Clean Don" width="60" height="60">
                <img src="/static/bird-ka-clean.svg" alt="Clean Ka" width="60" height="60">
            </div>
            
            <div class="test-item bg-gradient">
                <h4 style="color: white;">水墨风格</h4>
                <img src="/static/crocodile-don-clean.svg" alt="Don" width="60" height="60">
                <img src="/static/bird-ka-minimal.svg" alt="Minimal Bird" width="60" height="60">
            </div>
            
            <div class="test-item bg-black">
                <h4 style="color: white;">禅意风格</h4>
                <img src="/static/crocodile-don-clean.svg" alt="Don" width="60" height="60">
                <img src="/static/bird-ka-zen.svg" alt="Zen Bird" width="60" height="60">
            </div>
            
            <div class="test-item bg-red">
                <h4 style="color: white;">线条风格</h4>
                <img src="/static/crocodile-don-line.svg" alt="Line Don" width="60" height="60">
                <img src="/static/bird-ka-line.svg" alt="Line Bird" width="60" height="60">
            </div>
            
            <div class="test-item bg-blue">
                <h4 style="color: white;">极简风格</h4>
                <img src="/static/crocodile-don-line.svg" alt="Don" width="60" height="60">
                <img src="/static/bird-ka-ultra.svg" alt="Ultra Bird" width="60" height="60">
            </div>
            
            <div class="test-item bg-gradient">
                <h4 style="color: white;">用户手绘风格</h4>
                <img src="/static/user-crocodile.svg" alt="User Don" width="60" height="60">
                <img src="/static/user-bird.svg" alt="User Bird" width="60" height="60">
            </div>
            
            <div class="test-item bg-black">
                <h4 style="color: white;">用户简化版</h4>
                <img src="/static/user-crocodile-simplified.svg" alt="Simple Don" width="60" height="60">
                <img src="/static/user-bird-simplified.svg" alt="Simple Bird" width="60" height="60">
            </div>
            
            <div class="test-item bg-red">
                <h4 style="color: white;">用户适度简化</h4>
                <img src="/static/user-crocodile-moderate.svg" alt="Moderate Don" width="60" height="60">
                <img src="/static/user-bird-moderate.svg" alt="Moderate Bird" width="60" height="60">
            </div>
        </div>
    </div>
    
    <div class="test-section">
        <h2>3. 用户手绘版本对比（有背景）</h2>
        <div class="test-grid">
            <div class="test-item bg-blue">
                <h4 style="color: white;">原始手绘版</h4>
                <img src="/static/user-crocodile.svg" alt="Original Don" width="80" height="80">
                <img src="/static/user-bird.svg" alt="Original Bird" width="80" height="80">
            </div>
            
            <div class="test-item bg-green">
                <h4 style="color: white;">过度简化版</h4>
                <img src="/static/user-crocodile-simplified.svg" alt="Simple Don" width="80" height="80">
                <img src="/static/user-bird-simplified.svg" alt="Simple Bird" width="80" height="80">
            </div>
            
            <div class="test-item bg-gradient">
                <h4 style="color: white;">适度简化版</h4>
                <img src="/static/user-crocodile-moderate.svg" alt="Moderate Don" width="80" height="80">
                <img src="/static/user-bird-moderate.svg" alt="Moderate Bird" width="80" height="80">
            </div>
            
            <div class="test-item bg-black">
                <h4 style="color: white;">我的线条版（对比）</h4>
                <img src="/static/crocodile-don-line.svg" alt="Line Don" width="80" height="80">
                <img src="/static/bird-ka-line.svg" alt="Line Bird" width="80" height="80">
            </div>
        </div>
    </div>

    <div class="test-section">
        <h2>4. 不同尺寸测试</h2>
        <div class="test-grid">
            <div class="test-item">
                <h4>小尺寸 (20x20)</h4>
                <img src="/static/crocodile-don.svg" alt="Small Don" width="20" height="20">
                <img src="/static/bird-ka.svg" alt="Small Ka" width="20" height="20">
            </div>
            
            <div class="test-item">
                <h4>中尺寸 (40x40)</h4>
                <img src="/static/crocodile-don.svg" alt="Medium Don" width="40" height="40">
                <img src="/static/bird-ka.svg" alt="Medium Ka" width="40" height="40">
            </div>
            
            <div class="test-item">
                <h4>大尺寸 (80x80)</h4>
                <img src="/static/crocodile-don.svg" alt="Large Don" width="80" height="80">
                <img src="/static/bird-ka.svg" alt="Large Ka" width="80" height="80">
            </div>
        </div>
    </div>
    
    <div class="test-section">
        <h2>4. 内联SVG测试</h2>
        <div class="test-grid">
            <div class="test-item">
                <h4>内联 Crocodile SVG</h4>
                <div class="svg-container">
                    <svg width="60" height="60" viewBox="0 0 100 100">
                        <ellipse cx="50" cy="55" rx="30" ry="18" fill="#FFFFFF" stroke="#E0E0E0" stroke-width="2" opacity="0.9"/>
                        <ellipse cx="25" cy="40" rx="18" ry="9" fill="#FFFFFF" stroke="#E0E0E0" stroke-width="2" opacity="0.9"/>
                        <circle cx="28" cy="35" r="3" fill="#333333"/>
                        <circle cx="29" cy="34" r="1" fill="#FFFFFF"/>
                        <circle cx="10" cy="37" r="1.5" fill="#666666"/>
                    </svg>
                </div>
                <div class="status success">✅ 内联SVG正常</div>
            </div>
            
            <div class="test-item">
                <h4>JavaScript动态加载</h4>
                <div id="dynamic-svg-container"></div>
                <button onclick="loadSVGDynamically()">加载SVG</button>
                <div id="dynamic-status" class="status info">点击按钮测试</div>
            </div>
        </div>
    </div>
    
    <div class="test-section">
        <h2>5. 网络请求测试</h2>
        <div class="test-grid">
            <div class="test-item">
                <h4>Fetch API测试</h4>
                <button onclick="testFetchSVG()">测试Fetch</button>
                <div id="fetch-result" class="status info">点击测试</div>
                <pre id="fetch-headers" style="font-size: 10px; text-align: left; max-height: 100px; overflow: auto;"></pre>
            </div>
            
            <div class="test-item">
                <h4>XMLHttpRequest测试</h4>
                <button onclick="testXHRSVG()">测试XHR</button>
                <div id="xhr-result" class="status info">点击测试</div>
                <pre id="xhr-headers" style="font-size: 10px; text-align: left; max-height: 100px; overflow: auto;"></pre>
            </div>
        </div>
    </div>
    
    <div class="test-section">
        <h2>6. 控制台日志</h2>
        <div id="console-log" style="background: #f8f9fa; padding: 15px; border-radius: 4px; max-height: 200px; overflow-y: auto; font-family: monospace; font-size: 12px;"></div>
        <button onclick="clearLog()">清除日志</button>
    </div>

    <script>
        // 重写console.log来显示在页面上
        const originalLog = console.log;
        const logContainer = document.getElementById('console-log');
        
        function log(message, type = 'info') {
            originalLog(message);
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = document.createElement('div');
            logEntry.style.marginBottom = '5px';
            logEntry.style.color = type === 'error' ? '#dc3545' : type === 'success' ? '#28a745' : '#333';
            logEntry.textContent = `[${timestamp}] ${message}`;
            logContainer.appendChild(logEntry);
            logContainer.scrollTop = logContainer.scrollHeight;
        }
        
        function clearLog() {
            logContainer.innerHTML = '';
        }
        
        // 动态加载SVG测试
        function loadSVGDynamically() {
            const container = document.getElementById('dynamic-svg-container');
            const status = document.getElementById('dynamic-status');
            
            const img = document.createElement('img');
            img.src = '/static/crocodile-don.svg';
            img.width = 60;
            img.height = 60;
            img.alt = 'Dynamic Don';
            
            img.onload = function() {
                status.textContent = '✅ 动态加载成功';
                status.className = 'status success';
                log('动态加载SVG成功', 'success');
            };
            
            img.onerror = function() {
                status.textContent = '❌ 动态加载失败';
                status.className = 'status error';
                log('动态加载SVG失败', 'error');
            };
            
            container.innerHTML = '';
            container.appendChild(img);
        }
        
        // Fetch API测试
        async function testFetchSVG() {
            const resultDiv = document.getElementById('fetch-result');
            const headersDiv = document.getElementById('fetch-headers');
            
            try {
                const response = await fetch('/static/crocodile-don.svg');
                
                if (response.ok) {
                    const svgText = await response.text();
                    resultDiv.textContent = `✅ Fetch成功 (${response.status})`;
                    resultDiv.className = 'status success';
                    
                    // 显示响应头
                    const headers = {};
                    response.headers.forEach((value, key) => {
                        headers[key] = value;
                    });
                    headersDiv.textContent = JSON.stringify(headers, null, 2);
                    
                    log(`Fetch SVG成功: ${response.status} ${response.statusText}`, 'success');
                    log(`Content-Type: ${response.headers.get('content-type')}`, 'info');
                    log(`Content-Length: ${svgText.length} chars`, 'info');
                } else {
                    resultDiv.textContent = `❌ Fetch失败 (${response.status})`;
                    resultDiv.className = 'status error';
                    log(`Fetch SVG失败: ${response.status} ${response.statusText}`, 'error');
                }
            } catch (error) {
                resultDiv.textContent = `❌ Fetch错误: ${error.message}`;
                resultDiv.className = 'status error';
                log(`Fetch SVG错误: ${error.message}`, 'error');
            }
        }
        
        // XMLHttpRequest测试
        function testXHRSVG() {
            const resultDiv = document.getElementById('xhr-result');
            const headersDiv = document.getElementById('xhr-headers');
            
            const xhr = new XMLHttpRequest();
            
            xhr.onreadystatechange = function() {
                if (xhr.readyState === XMLHttpRequest.DONE) {
                    if (xhr.status === 200) {
                        resultDiv.textContent = `✅ XHR成功 (${xhr.status})`;
                        resultDiv.className = 'status success';
                        
                        // 显示响应头
                        const headers = xhr.getAllResponseHeaders();
                        headersDiv.textContent = headers;
                        
                        log(`XHR SVG成功: ${xhr.status} ${xhr.statusText}`, 'success');
                        log(`Response length: ${xhr.responseText.length} chars`, 'info');
                    } else {
                        resultDiv.textContent = `❌ XHR失败 (${xhr.status})`;
                        resultDiv.className = 'status error';
                        log(`XHR SVG失败: ${xhr.status} ${xhr.statusText}`, 'error');
                    }
                }
            };
            
            xhr.onerror = function() {
                resultDiv.textContent = '❌ XHR网络错误';
                resultDiv.className = 'status error';
                log('XHR SVG网络错误', 'error');
            };
            
            xhr.open('GET', '/static/crocodile-don.svg');
            xhr.send();
        }
        
        // 页面加载时的初始日志
        window.addEventListener('load', function() {
            log('SVG测试页面加载完成', 'success');
            log(`当前URL: ${window.location.href}`, 'info');
            log(`User Agent: ${navigator.userAgent}`, 'info');
        });
        
        // 监听图片加载错误
        window.addEventListener('error', function(e) {
            if (e.target.tagName === 'IMG') {
                log(`图片加载失败: ${e.target.src}`, 'error');
                log(`错误详情: ${e.message || '未知错误'}`, 'error');
            }
        }, true);
        
        // 监听图片加载成功
        document.addEventListener('load', function(e) {
            if (e.target.tagName === 'IMG') {
                log(`图片加载成功: ${e.target.src}`, 'success');
            }
        }, true);
    </script>
</body>
</html>